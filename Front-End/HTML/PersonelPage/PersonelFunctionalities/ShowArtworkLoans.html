<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../../../CSS/style.css" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <title>Artwork Loans</title>
  </head>
  <body>
    <div class="container mt-5">
      <h1>Artwork Loans</h1>
      <table id="artworkLoansTable" class="table table-striped">
        <thead>
          <tr>
            <th>Artwork ID</th>
            <th>Partnership ID</th>
            <th>Employee ID</th>
            <th>status</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Conditions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <script>
      // Fetch artwork loans and fill the table
      window.onload = function () {
        fetch("http://localhost:3001/api/artworkLoans")
          .then((response) => response.json())
          .then((artworkLoans) => {
            const tableBody = document
              .getElementById("artworkLoansTable")
              .getElementsByTagName("tbody")[0];

            artworkLoans.forEach((artworkLoan) => {
              const newRow = tableBody.insertRow();

              const artworkIdCell = newRow.insertCell();
              const partnershipIdCell = newRow.insertCell();
              const workerIdCell = newRow.insertCell();
              const statusCell = newRow.insertCell();
              const startDateCell = newRow.insertCell();
              const endDateCell = newRow.insertCell();
              const conditionsCell = newRow.insertCell();

              artworkIdCell.textContent = artworkLoan.artworkId;
              partnershipIdCell.textContent = artworkLoan.partnershipId;
              workerIdCell.textContent = artworkLoan.workerId;
              statusCell.textContent = artworkLoan.status;
              startDateCell.textContent = new Date(
                artworkLoan.startDate
              ).toLocaleDateString();
              endDateCell.textContent = new Date(
                artworkLoan.endDate
              ).toLocaleDateString();
              conditionsCell.textContent = artworkLoan.conditions;
            });
          });
      };
    </script>
  </body>
</html>
